<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
   <title>CruiseControl Installation Instructions</title>
   <link href="../../docs/cruisecontrol.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<div class="header">
    <div class="hostedby">
        Hosted By:<br/>
        <a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=23523&type=1" width="88" height="31" alt="SourceForge Logo"/></a>
    </div>
    <img alt="CruiseControl" src="banner.gif"/>
</div>
<div class="container">&nbsp;
    <div id="menu">
        <ul id="menulist">
            <li><a href="../../docs/index.html">home</a></li>
            <li><a href="../../docs/download.html">download</a></li>
            <li><h2>documentation</h2>
                <ul>
                    <li><a href="index.html">build loop</a>
                        <ul>
                            <li><p id="menuselected">install</p></li>
                            <li><a href="plugins.html">plugins</a></li>
                        </ul>
                    </li>
                    <li><a href="../../reporting/jsp/docs/index.html">results jsp</a></li>
                    <li><a href="configxml.html">config</a></li>
                    <li><a href="../../docs/faq.html">faq</a></li>
                    <li><a href="http://confluence.public.thoughtworks.org/display/CC/Home">wiki</a></li>
                </ul>
            </li>
            <li><h2>contributing</h2>
                <ul>
                    <li><a href="../../docs/developers.html">developers</a></li>
                    <li><a href="../../docs/contact.html">mailing lists</a></li>
                    <li><a href="../../docs/cvs.html">cvs repository</a></li>
                </ul>
            </li>
            <li><p id="menubottom">&nbsp;</p></li>
        </ul>
    </div>
    <div class="content">
        <h1>Installation Instructions</h1>
        
        <h2>Installing the main build loop</h2>

        <ul>
            <li><a href="#downloadsource">1. Download src/build</a></li>
            <li><a href="#createconfigfile">2. Create config file</a></li>
            <li><a href="#startupcruisecontrol">3. Startup cruisecontrol</a></li>
        </ul>

        <h2><a name="downloadsource">1. Download Source/Build</a></h2>

        <p>Download the source from <a href="../../docs/cvs.html">CVS</a>.</p>
        
        <>results jsp<>If you examine the code you just downloaded, there will be a
        build.bat (for Windows users) and a build.sh (for UNIX users) present
        in the <code>cruisecontrol/main</code> directory.  Execute the
        appropriate script, and CruiseControl should compile.  Look in the dist
        directory, and you should find a cruisecontrol.jar file if the build
        was successful.</p>

        <h2><a name="createconfigfile">2. Create config file / Upgrade previous
        version</a></h2>

        <p>All of the cruisecontrol configuration exists in a single config
        file.  If you're new to cruisecontrol, you'll have to create this file.
        If you have used a previous version of cruisecontrol, you can use the
        upgrader to convert your old setup to a config.xml file.</p>

        <p>New users should read the explanation of the
        <a href="configxml.html">config file format</a></p>

        <p>To run the upgrader, execute the following command:</p>

<pre>
java -jar cruisecontrol.jar -upgrade <i>buildfile propertiesfile configfile projectname</i></pre>

        <p>Where the command line attributes are as follows:</p>
        
        <table class="documentation">
            <tr>
                <th>Flag</th>
                <th>Required</th>
                <th>Description</th>
            </tr>
            <tr class="oddrow">
                <td>buildfile</td>
                <td>Yes</td>
                <td>build.xml file that contains the modificationset task.  The
                buildfile will not be modified.</td>
            </tr>
            <tr>
                <td>propertiesfile</td>
                <td>Yes</td>
                <td>cruisecontrol.properties file from the previous installation.</td>
            </tr>
            <tr class="oddrow">
                <td>configfile</td>
                <td>No</td>
                <td>New config file to be written.  Defaults to config.xml</td>
            </tr>
            <tr>
                <td>projectname</td>
                <td>Yes</td>
                <td>Unique idenifier for this project.</td>
            </tr>
        </table>

        <p>A config file should be written to disk, and we can proceed to the
        next installation step.</p>

        <h2><a name="startupcruisecontrol">3. Startup CruiseControl</a></h2>

        <p>CruiseControl can be started using two approaches:</p>
        
        <ul>
            <li>
                <b>Scripts.</b> bin/cruisecontrol.bat or bin/cruisecontrol.sh.
            </li>
            <li>
                <b>Executable jar.</b>   Type the following command:
                <p><code>
                java -jar dist/cruisecontrol.jar
                </code></p>
            </li>
        </ul>

        <p>In either approach, the following command line arguments can be specified:</p>
        
        <table class="documentation">
            <tr>
                <th>Flag</th>
                <th>Required</th>
                <th>Description</th>
            </tr>
            <tr class="oddrow">
                <td>-projectname&nbsp;<i>name</i></td>
                <td>Yes</td>
                <td>Should match the name attribute of the &lt;project&gt;
                element in the config file</td>
            </tr>
            <tr>
                <td>-lastbuild&nbsp;<i>timestamp</i></td>
                <td>First Time</td>
                <td>Timestamp format is YYYYMMddHHmmss</td>
            </tr>
            <tr class="oddrow">
                <td>-label&nbsp;<i>label</i></td>
                <td>First Time</td>
                <td>Label format depends on the labelincrementer used.</td>
            </tr>
            <tr>
                <td>-configfile&nbsp;<i>filename</i></td>
                <td>No</td>
                <td>Relative path to CruiseControl config file.  Defaults to "config.xml".</td>
            </tr>
            <tr class="oddrow">
                <td>-port&nbsp;<i>port&nbsp;number</i></td>
                <td>No</td>
                <td>Port number for the JMX HTML adaptor.  This will activate
                the JMX admin functionality of CruiseControl</td>
            </tr>
        </table>

        <p>After the first build cycle, the values for<code>-lastbuild</code>,
        <code>-label</code> and <code>-configfile</code> will be saved.  If
        cruisecontrol should need to be restarted, the values for these
        arguments need not be specified, unless you would like to override the
        values that cruisecontrol has.  The only argument that is always
        required is <code>-projectname</code>.</p>

    </div>
</div>
</body>
</html>
