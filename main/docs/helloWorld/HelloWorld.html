<!doctype html public "-//w3c//dtd html 3.2//en">

<html>

<head>
<title>CruiseControl Hello World</title>
<meta name="GENERATOR" content="Arachnophilia 4.0">
<meta name="FORMATTER" content="Arachnophilia 4.0">
</head>

<body bgcolor="#CCCCFF" text="#000066" link="#0000ff" vlink="#800080" alink="#ff0000">
<h1><center>CruiseControl Hello World</center></h1>
<center>By Jason Che-han Yip, <a href="mailto:jcyip@thoughtworks.com">jcyip@thoughtworks.com</a></center>
<center><b>Last modified:</b> July 17, 2002</center>
<hr width="95%" align=center>

<p>This is a very simple sample use of CruiseControl  and Ant on a Hello World project using Tomcat as the servlet engine.    Please e-mail if you have any comments, corrections, or problems.</p>

<ol>
	<li> <b><a href="#buildXML">Set up the Ant build file</a></b>
	<li> <b><a href="#ccConfig">Set up CruiseControl config file</a></b>
	<li> <b><a href="#setupTomcat">Set up Tomcat</a></b>
	<li> <b><a href="#runCC">Run Cruise Control</a></b>
	<li> <b><a href="#viewResults">View results</a></b>
</ol>

<h2><a name="buildXML">Set up the Ant build file</a></h2>

<p>There are example Ant build files provided for the various source control systems supported by CruiseControl.  For convenience of modification, the properties are set at the top of the build file and referenced in the targets below.  Any properties that need to be set will have a note in ALL CAPS.  For example, at the top of cvs-build.xml, you should find:</p>

<pre>
&lt;property name="cvs.repository" value="REPLACE WITH CVSROOT" /&gt;
&lt;property name="cvs.package" value="REPLACE WITH CVS PACKAGE" /&gt; 
&lt;property name="ccdir" value="REPLACE WITH CC DIRECTORY" /&gt; 
</pre>

<h2><a name="ccConfig">Set up CruiseControl config file</a></h2>
<p>There are sample CruiseControl config files provided for the various source control systems supported by CruiseControl.  Any changes that need to be made will have a note in ALL CAPS.  For example, within cvs-config.xml, you should find:</p>

<pre>
&lt;cvs cvsroot="REPLACE WITH CVSROOT" /&gt;
...
&lt;email mailhost="REPLACE WITH MAILHOST" returnaddress="REPLACE WITH RETURN EMAIL ADDRESS" defaultsuffix="" buildresultsurl="http://localhost:8080/buildservlet/BuildServlet"&gt; 
&lt;always address="REPLACE WITH BUILD MASTER EMAIL ADDRESS" /&gt;
&lt;failure address="REPLACE WITH FAILURE EMAIL ADDRESS" /&gt;
&lt;/email&gt;
</pre>

<p><b>NOTE:</b> The log directory in the config file must be the same as specified in the <a href="#setupTomcat">web.xml for Tomcat.</a></p>

<p>More details on the config file can be found <a href="../manual/configxml.html">here</a></p>

<h2><a name="setupTomcat">Set up Tomcat</a></h2>
<h3>Modify  web.xml</h3>
<p>Edit the web.xml found in the CruiseControl reporting module.  You will need to add the locations of the log directory and the current build file.  These should be in the form of an absolute path.</p>

<h3>Build cruisecontrol.war</h3>
<p>Build the reporting module using the provided build script.  This should generate a cruisecontrol.war in the dist directory.</p>

<h3>Deploy to Tomcat</h3>
<p>Copy the cruisecontrol.war to Tomcat's webapps directory.  Startup Tomcat.</p>

<h2><a name="runCC">Run CruiseControl</a></h2>
<p>Use the provided cruiseControl.bat or cruiseControl.sh to run CruiseControl.  You'll need to set CCDIR as appropriate.  Arguments are:</p>

<ul>
	<li><b> -port <i>port number</i></b> - OPTIONAL: used to specify the port of a JMX controller for CruiseControl</li>
	<li><b>-projectname <i>project name</i></b> - ALWAYS REQUIRED: name of the CruiseControl project</li>
	<li> <b>-lastbuild <i>YYYYMMDDHHmmss</i></b> - REQUIRED FIRST TIME ONLY: <i>Example:</i> For a last build at Jan. 1, 2001 at 12:00:00, -lastbuild 20010101120000.</li>
	<li> <b>-label <i>label</i></b> - REQUIRED FIRST TIME ONLY: <i>Examples:</i> build.0 for the DefaultLabelIncrementer or build_0 for the CVSLabelIncrementer.</li>
	<li> <b>-configfile <i>config file name</i></b> - OPTIONAL: Name of the config file.  Defaults to config.xml.</li>
</ul>

<h2><a name="viewResults">View results</a></h2>
<p>If the CruiseControl setup was successful, you should have received an e-mail with a link to a page that will be generated by the servlet.</p>

<p><b>NOTE:</b> By modifying the config file to use a HTMLEmailPublisher vs a LinkEmailPublisher, you can have the build results attached to the e-mail</p>

</body>

</html>

