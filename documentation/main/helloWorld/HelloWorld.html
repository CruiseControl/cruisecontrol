<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>CruiseControl Hello World</title>
</head>

<body>
<h1>CruiseControl Hello World</h1>
<p>By Jason Che-han Yip, <a href="mailto:jcyip@thoughtworks.com">jcyip@thoughtworks.com</a></p>
<p>Send questions to the users list, <a href="mailto:">cruisecontrol-users@lists.sourceforge.net</a></p>


<p><strong>Last modified:</strong> June 20, 2003</p>
<hr style="width:95%" />

<ol>
    <li><strong><a href="#checkin">Check-in the Hello World files</a></strong></li>
    <li><strong><a href="#buildXML">Setup the Ant build file</a></strong></li>
    <li><strong><a href="#ccConfig">Setup the CruiseControl config file</a></strong></li>
    <li><strong><a href="#setupWebapp">Setup the web application</a></strong></li>
    <li><strong><a href="#runCC">Run CruiseControl</a></strong></li>
    <li><strong><a href="#viewResults">View results</a></strong></li>
</ol>

<h2><a name="checkin">Check-in the Hello World files</a></h2>

<p>Commit the Hello World source files to your source control repository</p>

<h2><a name="buildXML">Setup the Ant build file</a></h2>

<p>There are example Ant build files provided for the various source control systems supported by CruiseControl. For
    convenience of modification, the properties are set at the top of the build file and referenced in the targets
    below. Any properties that need to be set will have a note in ALL CAPS. For example, at the top of cvs-build.xml,
    you should find:</p>

<pre>
    &lt;property name="cvs.repository" value="REPLACE WITH CVSROOT" /&gt;
    &lt;property name="cvs.package" value="REPLACE WITH CVS PACKAGE" /&gt;
</pre>

<h2><a name="ccConfig">Setup the CruiseControl config file</a></h2>

<p>There are sample CruiseControl config files provided for the various source control systems supported by
    CruiseControl. Any changes that need to be made will have a note in ALL CAPS. For example, within cvs-config.xml,
    you should find:</p>

<pre>
    &lt;cvs cvsroot="REPLACE WITH CVSROOT" /&gt;
    ...
    &lt;email mailhost="REPLACE WITH MAILHOST" returnaddress="REPLACE WITH RETURN EMAIL ADDRESS" defaultsuffix=""
    buildresultsurl="http://localhost:8080/buildservlet/BuildServlet"&gt;
    &lt;always address="REPLACE WITH BUILD MASTER EMAIL ADDRESS" /&gt;
    &lt;failure address="REPLACE WITH FAILURE EMAIL ADDRESS" /&gt;
    &lt;/email&gt;
</pre>

<p><strong>NOTE:</strong> The log directory in the config file must be the same
    as specified in the <a href="#setupWebapp">web.xml for the web application.</a></p>

<p>More details on the config file can be found <a href="../configxml.html">here</a></p>

<h2><a name="setupWebapp">Setup the web application</a></h2>

<h3>Modify web.xml</h3>

<p>Edit the web.xml found in the CruiseControl reporting module. You will need to add the
    locations of the log directory and the current build file. These should be in the
    form of an absolute path.</p>

<h3>Build cruisecontrol.war</h3>

<p>Build the reporting module using the provided build script. You will be asked to provide the path for several
    things:</p>
<ul>
    <li><strong>user.log.dir</strong> - absolute path to the logs directory specifed in the config.xml</li>
    <li><strong>user.build.status.file</strong> - absolute path to the file specified by the currentbuildstatuslistener in the
        config.xml</li>
    <li><strong>cruise.build.artifacts.dir</strong> - (OPTIONAL) absolute path to a directory that stores additional build
        artifacts. The reporting webapp will provide a link to this directory</li>
</ul>

<p>This should generate a cruisecontrol.war in the dist directory. Deploy this to a servlet engine (e.g., Tomcat).</p>

<h2><a name="runCC">Run CruiseControl</a></h2>

<p>Set CCDIR to the installation of the main CruiseControl app (e.g., c:\cruisecontrol\main). Use the provided
    cruiseControl.bat or cruiseControl.sh to run CruiseControl. Arguments are:</p>

<ul>
    <li><strong> -jmxport <em>port number</em></strong> - used to specify the port of the JMX controller for CruiseControl</li>
    <li><strong>-configfile <em>config file name</em></strong> - OPTIONAL: Name of the config file. Defaults to config.xml.</li>
</ul>

<h2><a name="viewResults">View results</a></h2>

<p>If the CruiseControl setup was successful, you should have received an e-mail with a link to a page that will be
    generated by the servlet.</p>

<p><strong>NOTE:</strong> By modifying the config file to use a HTMLEmailPublisher instead of a LinkEmailPublisher, you can have
    the build results in the e-mail</p>

</body>

</html>

