CruiseControl Release Notes - Latest CVS

AntBuilder & MavenBuilder:
----------------------
* When using Windows, "cmd.exe /C" is no longer prepended to the command line to avoid problems with spaces.
  This means you'll have to use 'ant.bat' or 'maven.bat' instead of just 'ant' or 'maven'!
* getCommandLineArgs now uses Commandline-class

build.xml (jsp)
----------------------
* Reverted to using 'war' as the default target instead of 'test'.
* Removed references to "**/element/" (CC-57). Patch by Jerome Lacoste

BuildQueue
----------------------
* Add support for multiple build threads (ThreadQueue). Patch by Jared Richardson

CruiseControl
----------------------
* Now obeys to Checkstyle 3.4 rules HideUtilityClassConstructor and FinalClass (CC-56). Patch by Jerome Lacoste

cruisecontrol-jsp12.tld
----------------------
* Fix id attribute typo for LinkTag. Patch by Gareth Reakes

EmailPublisher & friends
----------------------
* Uses new EmailMapperHelper to map addresses with EmailMappers. Patch by Esa Laine (Jira CC-2)

LoggerController
----------------------
* new JMX MBean to control a Logger's logging level. A controller for the root logger is registered at startup.

MavenBuilder
----------------------
* Fix for CC-40 where download failures were treated as success. Patch by Tim Shadel

Project
----------------------
* Reset ProjectState to IDLE in case of an exception while building. Patch by Will Gwaltney

website / documentation
----------------------
* Rework navigation for feedback, completeness and consistency. Convert navigation from images to text. Convert to semantic markup. Address inconsistency of configxml.html. Patch by Joe Schmetzer

CruiseControl Release Notes - 2.1.6

AlwaysBuild
----------------------
* New SourceControl that always returns a modification. Submitted by Eric Pugh

AntBuilder
----------------------
* Added more infomative exception when log file doesn't contain a build tag. Patch by Dave Glowacki
* Added check to ensure that log file exists before trying to get contents.
* Fixed getCommandLineArgs to handle EmptyLabelIncrementer
* Added timeout attribute. Patch by Igor Fedorenko
* Added two XMLFilters to remove empty <message>- and <task>-elements from the XML log file in getAntLogAsElement.

BuildInfoTag
----------------------
* Added a tag to obtain summary and metric data about builds from the log
  files. This is used in the metris.jsp page.

ClearCase
----------------------
* use ISO-8859-1 enoding while parsing ClearCase outpout. Patch by Arent-Jan Banck

compile.xsl
----------------------
* Ignore empty lines. Patch by Brad Clarke (note: this is now obsolete for new logfiles but still useful for old ones)

Compound
----------------------
* New SourceControl implementation uses nested Trigger and Target sourcecontrols. The targets are only checked for changes if there is a change detected by a trigger. Submitted by Will Gwaltney

cruisecontrol.sh
----------------------
* Support relative sym links. Patch by Jerome Lacoste

CVS
----------------------
* Fixed a bug with not returning modfications when the tag attribute is used.

controlpanel.jsp
----------------------
* Replace link with iframe showing JMX interface. Patch by Archibald Bartleman

CruiseControlController
----------------------
* On a new project (no serialized project found) force a build. This is to aid setting up CruiseControl as you will not need to wait for a modification.
* Now parses plugin definitions defined directly under the <cruisecontrol> root-element in the config file. 
  These are defined for all projects, but can still be overridden per project.

distributables.xsl
----------------------
* Added info for the ejbjar and ear tasks. Patch by Joris Kuipers

EmailPublisher
----------------------
* Send build notification emails to all valid recipients and not to fail build even if some of the email addresses were rejected by SMTP rely. Patch Igor Fredorenko

FileServlet
----------------------
* write(stream) now uses buffered IO. Patch by Garrick Olson

FileSystem
----------------------
* check to see that specified folder exists. Patch by Eric Pugh

HTMLEmailBuilder
----------------------
* Delete temp files after they've been used. Patch by Joris Kuipers

HttpFile
----------------------
* New sourcecontrol that reports changes if a web page has been changed. Patch by Brad Clarke

index.jsp
----------------------
* Sort projects. Patch by Brad Clarke

JDOM support
----------------------
* Upgraded from version b7 to version b9

jmx
----------------------
* Now using MX4J instead of Sun's reference implementation. Patch by Michael Kloss
* Added RMI adapter. Patch by Michael Beauregard

Main
----------------------
* Display command-line options if "-?" is passed as an argument.

main.jsp
----------------------
* Added a metrics tab.

MergeLogger
----------------------
* Use XMLFilter to remove properties from JUnit results. This fixes removal for JUnit reports and uses less resources.

metrics.jsp
----------------------
* New Metrics tab. This uses the new <buildinfo> tag, and renders charts using
  the cewolf tag libraries.

ModificationSet
----------------------
* Fixed bogus "A modification was detected in the future" message
* Now properly checks time of modficiations that are added as elements

NavigationTag
----------------------
* Dates for navigation links now formatted according to the locale of the user's browser.a

P4
----------------------
* Close Process-streams in collectChangelistSinceLastBuild to avoid "too many open files"-errors

PluginRegistry
----------------------
* getDefaultPluginRegistry() now reads default plugins from a properties-file.
* Changed the implementation to have one root registry which contains the default plugins plus plugins defined as root elements in the config file.
  Each project will receive its own registry which delegates to its parent registry (the root) if it doesn't have its own definition for a plugin.

PluginXMLHelper
----------------------
* add support for nested elements via add(<Type>)

Project
----------------------
* Now fires BuildProgressEvents and BuildResultEvents. Patch by Michael Beauregard
* Includes a cvs friendly timestamp in the properties sent to Ant named cvstimestamp. Patch by Brad Clarke
* Include lastbuildsuccessful in properties sent to builders
* Checks for accidental rescheduling for Projects that run within a minute

PVCS
----------------------
* Added loginId attribute. Patch by David Cole
* Added back up date format to try in case output date includes seconds. Patch by David Cole
* Added additional parsing when project files includes project path. Patch by David Cole

StatusHelper
----------------------
* Build dates now formatted according to the locale of the user's browser.a

SVN
----------------------
* Revert to using date instead of guessing at revision. Patch by Etienne Studer
* Add to plugin registry. Patch by Gerd Zanker
* Add initial documentation in configxml.html and plugins.html. Patch by Gerd Zanker
* Updated method declarations for JDOM b9-compliancy

testdetails.xsl
----------------------
* Support testsuite elements that have been nested, such as in the output from junitreport. Patch by Joris Kuipers

VssBootstrapper
----------------------
* Fixed a bug where bootstrapper would hang if SS.exe put up a prompt.

web.xml
----------------------
* Added a welcome-file-list containing index.jsp; necessary for WebSphere (and maybe other appservers)

XSLTag.java
----------------------
* Changed serveCachedCopy to use Reader and char-array instead of InputStream and reading/writing char-by-char. Patch by Thai Ha

CruiseControl Release Notes - 2.1.5

ArtifactsPublisher
----------------------
* Add attribute 'subdirectory'. Patch by Garrick Olson
* Change copying of individual files to no longer use the path to the file before copying as part of the path after copying. Patch by Garrick Olson

BuildLogger
----------------------
* New interface to handle the Log subelements from the CruiseControl config. Implementers have the opportunity to manipulate the CruiseControl build log just before it gets written to disk.

BuildStatus
----------------------
* New SourceControl implementation. Used to trigger a build when another CruiseControl project has a successfuil build. Works by monitoring the log directory for the "target" project. - Patch by Garrick Olson

build.xml (jsp)
----------------------
* will build war w/out jars in WEB-INF/lib if property jdk1.4 is defined.
* removed files from war that shouldn't be included. Patch by Matt Albrecht

ClearCaseBootstrapper
----------------------
* Added ClearCaseBootstrapper to plug-in registry under the name "clearcasebootstrapper". - Patch by Esa Laine

ClearCase Sourcecontrol
----------------------
* Fixed bug with ClearCase version 2002.05.00 that hindered sending email. Patch by Ian Colledge and Esa Laine
* Fixed bug where comments with ~ or # were causing modifications to be lost

CruiseControlController
----------------------
* don't try and deserialize directories that have the same name as the project. Fix by Paul Spencer

CruiseControlTagSupport
----------------------
* minor change for compatibility with jdk 1.3 - Patch by Thai Thanh Ha

CVS
----------------------
* check for changes between lastBuild and checkTime, instead of all changes since lastBuild. Patch by Patrick Lisser
* use -N parameter to get added and removed files. Patch by Patrick Lisser

DefaultLabelIncrementer
----------------------
* added ability to set a default label - Patch by Garrick Olson

Email Publishers (LinkEmailPublisher and HTMLEmailPublisher)
----------------------
* failure subelements now contain an optional attribute "reportWhenFixed" to specify if the email address should be sent mail when the build is fixed.
* added emailaddressmapper attribute. Patch by Esa Laine

FileServlet
----------------------
* Use text/plain as default mime type instead of null. Fixes hang with Mozillia. Patch by Spencer Smith

FileSystem Sourcecontrol
----------------------
* Fixed bug where FS was reporting the wrong path for modifications. Patch by Randy Coulman.

FTP support
----------------------
* Added CurrentBuildStatusFTPBootstrapper and CurrentBuildStatusFTPPublisher. Submitted by Matt Albrecht
* Also added an FTPPublisher. (Submitted by Matt Albrecht)

index.jsp
----------------------
* Table of projects with status from last build. Adapted from a patch by Jared Richardson

JDOM support
----------------------
* Updated signatures for compatibility with JDOM beta-9. Patch by Alban Peignier
* Fix to ConcurrentModificationException in Updater when using JDOM beta-9. Patch by Matt Albrecht

JMX Interface
----------------------
* Added a halt operation on the CruiseControl process JMX interface. Patch from Matt Albrecht
* Renamed start operation to resume.
* Renamed stop operation to pause.

logfile.xsl
----------------------
* Changed the logfile.xsl to have an output method (some Xalan versions gave an error on this). Patch from Matt Albrecht

main.jsp & navigation.jsp
----------------------
* Fix for compatability with Tomcat 5.0. Patch from Robert Pearse
* Include sub-jsps instead of having all the content in main.jsp

MergeLogger
----------------------
* Added flag to control if properties are removed from JUnit results. Formerly they were always removed to reduce the size of the log file.

Modification Set
----------------------
* Changed to instruct CC to do a build if a modification occurs in the future. Patch by Geoff Krapf
* Calculate time to sleep when a modification is detected during the quiet period to be from "now" instead of when the check started. Patch by Patrick Lisser

Project
----------------------
* add descriptive toString so JMX view of CruiseControlManager shows status for each project - Patch by Matt Albrecht
* fixed to allow changing build interval from JMX interface. Project was reloading the original value from Schedule, overwriting any change a user had made in the JMX interface.
* Last Build and Last Good Build are now passed to the builders (cclastbuildtimestamp and cclastgoodbuildtimestamp respectively)

SametimeAnnouncementPublisher
----------------------
* New publisher implementation to publish build results to IBM/Lotus Sametime server. Contributed by Richard Lewis-Shell.

Schedule
----------------------
* Fixed a bug when there was more than a day between builds (like having only a weekly build).

StarTeam
----------------------
* remove use of NoExitSecurityManager. Makes StarTeam source control compatible with Halt command. Patch by Lee Marlow

StarTeamBootstrapper
----------------------
* added to plug-in registry. Patch by Lee Marlow

SVN
----------------------
* fix to use execute on Commandline object instead of just using getCommandline() - Patch by Etienne Studer
* updated to use new date format (Subversion 0.37 and later) Patch by Garrick Olson
* find and use correct head revision instead of always using "HEAD". Patch by Garrick Olson

TabSheetTag
----------------------
* changed to not use images for tabs. should make it easier to add new tabs.

XSLTLogPublisher
----------------------
* New publisher implementation to publish build results to an arbitrary output file. Obvious use is to generate web pages from the log, but could be another format as well. Contributed by David Cole

CruiseControl Release Notes - 2.1.4

AntBuilder
----------------------
* Added loggerClassName attribute to allow alternative ant listener/logger - Patch by Patrick Lisser

ArtifactsPublisher
----------------------
* Fixed a bug where a non-existant directory would result in a non-CruiseControl exception.

build.xml
----------------------
* Constrain checkstyle to only run against cruisecontrol code; ignore other packages.
* Build webapp by explicitly calling war target.  No longer default target.
* Can now override deploy.dir property to control where cruisecontrol.war ends up - Patch by Patrick Lisser

HTMLEmailPublisher
----------------------
* xslFileNames now encapsulated to allow for easier overriding - Patch by Patrick Lisser
* Added checkstyle.xsl - Patch by Dan Rollo

index.jsp
----------------------
* Added missing closing tag for unordered list - Patch by Esa Laine

main.jsp
----------------------
* Added missing call to maven.xsl.

ModificationSet
----------------------
* Added requiremodification attribute. Useful for building even when no modifications are found.

Project
----------------------
* Fixed a bug where value of buildForced was not being reset if modifications were found.
* Changed publish(Element) so an exception in one publisher will no longer prevent others from being called.

Schedule
----------------------
* Fixed a bug where checkPauseBuilders would not return a value larger than one day.
* Fixed a bug where chained pauses where not respected, with builds happening after the end of the first pause and during the second.
* Changed schedule to ignore the value of interval when there are only time based builds. This should get rid of most of the "No Builder selected" messages.
* Fixed a bug where no builder was selected on a forced build if all the builders were time based.
* Fixed a bug where time builders set for midnight would build later in the day
* Fixed a bug where a schedule with only time builds would not select a builder on a forced build if the next scheduled build time was during a pause.

Subversion
----------------------
* Added Subversion and SubversionBootstrapper - Submitted by Etienne Studer

unittests.xsl
----------------------
* Now includes testsuite errors in total - Patch by Patrick Lisser

Vss
----------------------
* Fixed a bug where a label in a root directory was showing up as a modification.

CruiseControl Release Notes - 2.1.3

log4j.properties
----------------------
* Fixed bug where the month was being used in place of minutes.
* Now using abbreviation of month name rather than month number.

MavenBuilderTest
----------------------
* Fixed bug trying to chmod test file on unix. - Patch by Andy Nguyen

unittests.xsl & testdetails.xsl
----------------------
* Will now work with merged junitreport xml output in addition to individual xml result files. - Fixed by Jason Yip

CruiseControl Release Notes - 2.1.2

AntBuilder
----------------------
* Fixed a bug in isWindows() that was returning false negatives. This would prevent antScript from working on some Windows systems.

ArtifactsPublisher
----------------------
* Added to the default plugin registrya

build.sh
----------------------
* Fixed problem with eol characters preventing files from executing on unix systems

build.xml
----------------------
* Added ability to specify tests to run from command-line, such as "build test -Dtests=ProjectTest" - Patch by Michael Beauregard

CVSBootstrapper
----------------------
* Add -dP to update command

EmailPublisher
----------------------
* Added nested success element - Patch by Marco Faini
* Added failAsImportant attribute - Patch by Ian MacDonald

FileServlet
----------------------
* Fixed a bug, brower displaying html source code, by adding the mime-type to the response.

HtmlEmailPublisher
----------------------
* Fixed a bug where username & password were ignored

JMX
----------------------
* Now exposing Project status (read-only) in the jmx interface

log4j.properties
----------------------
* Added more information into the console log including the timestamp - Patch by Mark Richters
* Added a rotating file log - Patch by Mark Richters

Project
----------------------
* Fixed a bug causing NPE when using a serialized project file from releases prior to 2.1
* Added labelIncrementer classname to message when isValidLabel fails - Patch by Richard Lewis-Shell

ProjectXMLHelper
----------------------
* Fixed a bug where if the log element existed dir was a required attribute

Schedule
----------------------
* Set maximum value for interval to one year

StarTeam
----------------------
* Fixed a bug where an NPE was thrown when a user account no longer existed - Patch by kathyh@syntricity.com

StarTeamBootstrapper
----------------------
* StarTeamBootstrapper submitted by Lee Marlow

testdetails.xsl
----------------------
* Added testdetails.xsl to generate content for the Test Details tab - Patch by Antoine Bonavita

CruiseControl Release Notes - 2.1.1

main/build.xml
----------------------
* update version to 2.1

reporting/jsp/build.xml
----------------------
* Filter token for build artifacts was missing  - Fixed by Jason Yip

cruisecontrol-jsp12.tld
----------------------
* Fixed closing tag-class, tei-class and body-content tags for ArtifactsLinkTag. - Found by Dan Rollo

Project
----------------------
* Fixed bug where a paused build would never resume.

unittests.xsl
----------------------
* Added classname for the failing unit test - Patch by Prakash Tirumalareddy

CruiseControl Release Notes - 2.1

ArtifactsPublisher
----------------------
* New functionality to allow for creation of a "build artifacts" directory. This directory can have artifacts published to it - things like jars that were built, documents that were published, etc. Then, these artifacts can be linked to from the CC webapp. - Submitted by Mike Rettig

AntBuilder
---------------------
* Added antWorkingDir attribute. - Patch by Brett Wooldridge
* Added support for multiple targets. (target="clean build")  - Patch by Josh Knowles
* Added useDebug attribute. This replaces test of log4j setting to get debug level ant output.  - Patch by Jeffrey Fredrick
* Save ant log if it can't be read.  Handles case when ant log produces invalid XML. - Patch by Richard Burgess
* 'target' attribute optional; will run default target in build.xml
* 'buildfile' attribute options; defaults to build.xml

Builder (includes AntBuilder)
----------------------
* if 'multiple' and 'time' are unspecified will default to multiple="1"

buildresults.jsp
----------------------
* The list of builds is now limited to 10 hard links, with the rest being done via a drop-down list.

ClearCaseBootstrapper
----------------------
* ClearCaseBootstrapper - by Stefan Hedtfeld

CVS
---------------------
* CVS sets the revision number when building lists of Modifications for showing diffs in ViewCVS or cvsWeb - Patch contributed by Christopher Lenz.
* Bug fixes to make mapping email addresses from CVSROOT/users work - Patch by Jeffrey Fredrick

CVSBootstrapper
----------------------
* Added LocalWorkingCopy attribute - Patch by Jon Langlois
* Now supports updating directories, not just single files

DefaultLabelIncrementer & CVSLabelIncrementer
----------------------
* Added preBuildIncrementer attribute. - Patch by Brett Wooldridge
* Added separator attribute to DefaultLabelIncrementer. CVSLabelIncrementor is just the default with separator="-".  - Patch by Jeffrey Fredrick

EmptyLabelIncrementer
----------------------
* Added EmptyLabelIncrementer - Submission by Josh Knowles

HTMLEmailPublisher
----------------------
* Added charset attribute.

JMX interface
----------------------
* Added support for multiple projects in one instance of CruiseControl
* Added ability to serialize the project via JMX, allowing the JMX interface to act as a serialized project editor. - Patch by Richard Lewis-Shell

LabelIncrementer
----------------------
* Added getDefaultLabel()

Main
----------------------
* Use current time if lastbuildtime isn't specified - Patch by Josh Knowles

MavenBuilder
---------------------
* New builder implementation, like AntBuilder but for Maven - by Florin Vancea.

ModificationSet
---------------------
* quietPeriod now optional; default value is 60 (one minutes)
* will complain if there isn't at least one nested sourcecontrol element

Multiple Classes
---------------------
* Added support to run multiple projects in one instance of CruiseControl. Each project is on its own schedule and only one project will build at a time. Multiple project supported in JMX and web reporting interfaces.

NavigationTag
----------------------
* Fixed bug to allow "L" in build label - Patch by Christopher Lenz
* Added "startingBuildNumber" and "finalBuildNumber" attributes, to allow for ranges of builds to be output; useful for, say, creating a drop-down list after the first 10 links.
* Now outputs the log file as a "logfile" variable.

Project
----------------------
* Project will create log directory if it doesn't exist. - Patch by Mark Richters
* Serialized file now uses .ser extension
* Will now get a default label from the LabelIncrementer if it doesn't already have one.

ProjectXMLHelper
----------------------
* ModificationSet is now pluggable. Defaults to the standard modification set, but a different implementation could be specified in your config.xml, so long as it extends ModificationSet. Thanks to Mike Royal, via Mike Mason.
* 'pause' and 'maven' are now registered by default
* Schedule is now pluggable.
* bootstrapper, log, and publishers are no longer required elements.
* can now set attributes on labelIncrementers (as opposed to just registering them). - Patch by Jeffrey Fredrick

PVCS
----------------------
* Fixed bug with UNC share paths - Patch by Dan Rollo
* Added pvcsbin attribute for when pvcs is not on the path - Patch by Dan Rollo

Schedule
----------------------
* Fixed a bug where a time builder wouldn't run if the time of the last build on the previous day was later than the time of the time builder. - Patch by Jeffrey Fredrick
* Fixed a bug where a time builder wouldn't run if the time was set to midnight. - Patch by Richard Lewis-Shell
* 'interval' now optional; defaults to 300 (five minutes)
* will complain if there isn't at least one nested builder element

StreamPumper & StreamConsumer
---------------------
* StreamConsumer implementations may now be registered with StreamPumpers to notified for each line "pumped".

VSS
----------------------
* Fixed issues with label entries, files added or deleted in root directory, branching, and sharing. - Patch by Matt Stave

XSLTag
----------------------
* Fixed a bug where using an unexpanded WAR file caused a NullPointerException.
* Added "xslRootContext" property, so that nested stylesheets know where the default directory is.


CruiseControl Release Notes - 2.0.2

JMX/PROJECT CONTROLLER
----------------------
* Added ability to force a rebuild via ProjectController (and effectivly JMX) Patch by Dominick Bellizzi. An implementation note. If project is in state "PAUSED" it won't force the build until you command "RESUME", but then it will emediatly start building.


PROJECT
----------------------
* Added ability to choose whether CruiseControl should continue to build after failure. Set in config via <project buildafterfailed="true/false">. Default is current behaviour, which is true. Patch by Dominick Bellizzi

JSP
----------------------
* XSL modified to render compile errors/warnings correctly on Netscape 4.7 - Patch by Sanjay Madhaven

EmailPublisher
----------------------
* Allow optional subject line prefix on emails for easier filtering - Patch by Peter Mei
* Added 'skipUsers' attribute to skip sending email to users who have checked in code - Patch by Jeffrey Fredrick
* Added optional 'returnName' attribute that pairs w/fromAddress - Patch by Gunnar Wagenknecht

Manifest
----------------------
* Added missing ant.jar, optional.jar, and xalan.jar manifest classpath entries - Bug found by Brett Watson

Ant
----------------------
* Ability to choose whether Ant runs XmlLogger as a Logger or a Listener - Patch by Keith Levy

P4
----------------------
* Correctly parse P4 changelist descriptions.  Patch by Mike Roberts.  Test by Tim Jones.

VSS
----------------------
* Fix parsing when label is in the entry.  Patches by Jeffrey Fredrick.
* Improved logging messages. Patch by Jeffrey Fredrick.
* Fix so that timeFormat is used. Patch by hammett

ClearCase
----------------------
* Pass properties ${clearcaselastbuild} and ${clearcasenow} to Ant for use by clearcase Ant tasks - Patch by Jeffrey Fredrick
* Fixed exception that occured with sym. links - Patch by Gunnar Wagenknecht

HTMLEmailPublisher
----------------------
* Added to the default plugin registry as <htmlemail> - Patch by Alden Almagro.
* buildServletUrl no longer required parameter (no link if omited). - Patch by Jeffrey Fredrick

CVS & MKS
----------------------
* Fixed bug where parsing would stop if input stream wasn't ready. - Patch by Steven Vernon

CruiseControl Release Notes - 2.0.1

PVCS
----------------------
* Configurable date formats - Patch by Kalpesh Parmar
* Modification type support - Patch by Steven E. Newton

XMLLogHelper
----------------------
* Make sure that Perforce emails are parsed correctly

ClearCase
----------------------
* Tests pass on Solaris - Patch by Alden Almagro

CVS
----------------------
* Correct modifications when HEAD is specified as the branch - Patch by McClain Looney
* No more 'deleted' modifications when a file addition occurs on a branch - Patch by McClain Looney

EmailPublisher
----------------------
* Allow mail port to be set - Patch by Neale Swinnerton

Project
----------------------
* XML encoding is only used if explicitly specified in <log> - Patch by Alden Almagro

New Publishers
----------------------
* Execute Publisher - Patch by Oren Miller
* SCPPublisher - Patch by Oren Miller

lib
----------------------
* Upgraded to Ant 1.5.1

docs
----------------------
* Fixed broken links

JSP
----------------------
* Fixed 'null' navigation bug - Patch by Sanjay Madhaven
* Allow configuration via ServletContext or ServletConfig - Patch by Ed Howe

