<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
/********************************************************************************
 * CruiseControl, a Continuous Integration Toolkit
 * Copyright (c) 2007, ThoughtWorks, Inc.
 * 200 E. Randolph, 25th Floor
 * Chicago, IL 60601 USA
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *     + Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *
 *     + Redistributions in binary form must reproduce the above
 *       copyright notice, this list of conditions and the following
 *       disclaimer in the documentation and/or other materials provided
 *       with the distribution.
 *
 *     + Neither the name of ThoughtWorks, Inc., CruiseControl, nor the
 *       names of its contributors may be used to endorse or promote
 *       products derived from this software without specific prior
 *       written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 ********************************************************************************/
-->

<project>
	<target name="-check.license">
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="p4.jar" />
			<param name="production.license.file" value="p4-license.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="commons-collections-3.2.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="commons-io-1.3.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="commons-lang-2.2.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="commons-logging-1.1.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="jmxremote.jar" />
			<param name="production.license.file" value="sun-binary-code-license.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="jmxri.jar" />
			<param name="production.license.file" value="sun-binary-code-license.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="joda-time-1.4.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="log4j-1.2.12.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-aop.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-beans.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-context.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-core.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-jmx.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-support.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-web.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
        <antcall target="-check.license.exist">
            <param name="production.library.file" value="spring-webmvc.jar" />
            <param name="production.license.file" value="apache-license-2.0.txt" />
        </antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="velocity-1.5.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
		<antcall target="-check.license.exist">
			<param name="production.library.file" value="velocity-tools-view-1.2.jar" />
			<param name="production.license.file" value="apache-license-2.0.txt" />
		</antcall>
        <!-- we're not checking a license of the aopalliance.jar because that is in the public domain -->
    </target>

	<target name="-check.license.exist">
		<echo message="checking license for included jar ${production.library.file}....." />
		<available file="${basedir}/lib/${production.library.file}" property="jar.exist" />
		<available file="${basedir}/lib/licenses/${production.license.file}" property="license.exist" />
		<fail message="You are missing ${production.library.file} ">
			<condition>
				<isFalse value="${jar.exist}" />
			</condition>
		</fail>
		<fail message="You may be missing ${production.license.file}">
			<condition>
				<isFalse value="${license.exist}" />
			</condition>
		</fail>
	</target>

	<target name="--check.license" depends="-check.license" />
	<target name="check.license" depends="-check.license" description="check whether library is added and license missing" />
</project>